#!/usr/bin/env node

var debug = require('debug')('BMCD:www');
var path = require('path');

var app = require('../app');

var Config = require('../config');

var server = app.listen(Config.port, function() {
  debug('BMCD listening on port ' + server.address().port);
});

var socket = require('../socket')(server);

if (process.env.NODE_ENV != 'development'){
    process.on('uncaughtException', function (err){
        console.log('crash:' + (typeof err === 'string')?err:JSON.stringify(err));
    });
}

global.io = socket;